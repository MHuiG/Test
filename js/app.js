var customSearch,checkExist;function click(e){document.all&&(2!=event.button&&3!=event.button||(oncontextmenu="return false")),document.layers&&3==e.which&&(oncontextmenu="return false")}!function(s){"use strict";var l=80,d=s(".l_header");function u(e,t){var n=1<arguments.length&&void 0!==t?t:l,a=e.href?s(decodeURI(e.getAttribute("href"))):s(e);s("html, body").animate({scrollTop:a.offset().top-n},600)}function o(){var t=s(".menu .active"),n=s(".s-top"),a=s("h1.title","#header-meta"),o=s(".safearea");t.length&&o&&t.click(function(e){e.preventDefault(),e.stopPropagation(),"/"!=t.attr("href")&&u(o),e.stopImmediatePropagation(),t.unbind("click")}),a.length&&o&&a.click(function(e){e.preventDefault(),e.stopPropagation(),u(o),e.stopImmediatePropagation(),a.unbind("click")}),n.length&&o&&n.click(function(e){e.preventDefault(),e.stopPropagation(),u(o),e.stopImmediatePropagation()});var e=s(".cover-wrapper"),c=s("#pjax-enable-cover").text(),i=0;e[0]&&"true"==c&&"none"!==s(".cover-wrapper#half").css("display")&&(i=e[0].clientHeight-240);var r=document.body.scrollTop;"true"==c&&"none"===s(".cover-wrapper#half").css("display")&&(r+=240),s(document,window).scroll(function(){var e=s(window).scrollTop();"true"==c&&"none"===s(".cover-wrapper#half").css("display")&&(e+=240);var t=e-r;240<(r=e)?(n.addClass("show"),0<t?n.removeClass("hl"):n.addClass("hl")):n.removeClass("show").removeClass("hl"),-1<e-i?d.addClass("show"):d.removeClass("show")})}function c(){var n,e,t,a,o;"true"==s.trim(s("#pjax-ispage").text())&&(window.subData={title:s.trim(s("#pjax-pageTitle").text()),tools:!0}),window.subData&&(n=s("header .wrapper"),e=s(".s-comment",n),t=s(".s-toc",n),n.find(".nav-sub .title").text(window.subData.title),a=document.body.scrollTop,s(document,window).scroll(function(){var e=s(window).scrollTop(),t=e-a;50<=t&&100<e?(a=e,n.addClass("sub")):t<=-50&&(a=e,n.removeClass("sub"))}),s(".l_body .comments").length?e.click(function(e){e.preventDefault(),e.stopPropagation(),u(s(".l_body .comments")),e.stopImmediatePropagation()}):e.remove(),(o=s(".l_body .toc-wrapper")).length&&o.children().length?(t.click(function(e){e.stopPropagation(),o.toggleClass("active"),t.toggleClass("active")}),s(document).click(function(e){e.stopPropagation(),o.removeClass("active"),t.removeClass("active")}),s(document,window).scroll(function(){o.removeClass("active"),t.removeClass("active")})):t.remove())}function i(){var e=s("body .navigation");e.find("li a.active").removeClass("active"),e.find("div a.active").removeClass("active");var t=null,n=location.pathname.replace(/\/|%|\./g,"");0==n.length&&(n="home");var a=n.match(/page\d{0,}$/g);a&&(a=a[0],n=n.split(a)[0]);var o=n.match(/index.html/);o&&(o=o[0],n=n.split(o)[0]),n&&e&&((t=s("#"+n,e))&&t.length&&t.addClass("active").siblings().removeClass("active"))}function r(){s(document).click(function(e){s(".m-phone .list-v").hide()}),s(window).scroll(function(){s(".m-phone .list-v").hide()})}function m(){var o,c,i,r,e,t,n=s(".toc-wrapper");0!==n.length&&(n.click(function(e){e.stopPropagation(),n.addClass("active")}),s(document).click(function(){return n.removeClass("active")}),n.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?u(e.target,0):"SPAN"===e.target.tagName&&u(e.target.parentElement,0),n.removeClass("active");var t=s(".s-toc");0<t.length&&t.removeClass("active")}),o=Array.from(n.find("li a")),i=(c=function(){return o.map(function(e){return Math.floor(s(decodeURI(e.getAttribute("href"))).offset().top-l)})})(),r=s(document).height(),e=function(){var e=s("html").scrollTop()||s("body").scrollTop();if(s(document).height()!=r&&(e=s("html").scrollTop()||s("body").scrollTop(),r=s(document).height(),i=c()),i){for(var t=0,n=i.length-1,a=void 0;t<n;)i[a=t+n+1>>1]===e?t=n=a:i[a]<e?t=a:n=a-1;s(o).removeClass("active").eq(t).addClass("active")}},s(window).scroll(function(){e()}),t=null,s(window).bind("resize",function(){t&&clearTimeout(t),t=setTimeout(function(){i=c(),e()},100)}),e())}function p(){var e=s(".tabs");if(0!==e.length){for(var t=e.find(".nav-tabs .tab"),n=0;n<t.length;n++){var a=e.find(t[n].children[0]);a.addClass(a.attr("href")),a.removeAttr("href")}s(".tabs .nav-tabs").on("click","a",function(e){e.preventDefault(),e.stopPropagation();var t=s(e.target.parentElement.parentElement.parentElement);return t.find(".nav-tabs .active").removeClass("active"),t.find(e.target.parentElement).addClass("active"),t.find(".tab-content .active").removeClass("active"),t.find(s(e.target).attr("class")).addClass("active"),!1})}}d[0]&&(l=d[0].clientHeight+16),s(function(){var t,n,a,e;c(),i(),s(".m-pc li > a[href]").parent().click(function(e){e.stopPropagation(),e.target.origin==e.target.baseURI&&s(".m-pc .list-v").hide()}),s(".m-phone li").click(function(e){e.stopPropagation(),s(s(e.currentTarget).children("ul")).show()}),r(),t=s(".l_header .switcher .s-search"),n=s(".l_header"),a=s(".l_header .m_search"),0!==t.length&&(t.click(function(e){e.stopPropagation(),n.toggleClass("z_search-open"),t.toggleClass("active"),a.find("input").focus()}),s(document).click(function(e){n.removeClass("z_search-open"),t.removeClass("active")}),a.click(function(e){e.stopPropagation()}),n.ready(function(){n.bind("keydown",function(e){if(9==e.keyCode)return!1;var t,n=!!document.all,a=n?(t=window.event.keyCode,window.event):(t=e.which,e);9==t&&(n?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))})})),m(),o(),e="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/img/","google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:e}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:e}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:e}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:e}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:e})),p(),s(".scroll-down").on("click",function(){u(".safearea")});try{document.addEventListener("pjax:complete",function(){s(function(){l=80,(d=s(".l_header"))[0]&&(l=d[0].clientHeight+16),c(),i(),r(),m(),o(),p();var t=s(".l_header .switcher .s-search"),n=s(".l_header");0!==t.length&&s(document).click(function(e){n.removeClass("z_search-open"),t.removeClass("active")})})},{passive:!0})}catch(e){}}),s(".darkbtn").parents(".header").on("click",function(e){window.darkmode.toggle(),window.darkmode.isActivated()?(s(".darkbtn").removeClass("fa-moon"),s(".darkbtn").addClass("fa-sun")):(s(".darkbtn").removeClass("fa-sun"),s(".darkbtn").addClass("fa-moon"))})}(jQuery),window.location.hash&&(checkExist=setInterval(function(){"undefined"!=typeof jQuery&&$("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).length&&($("html, body").animate({scrollTop:$("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).offset().top-40},500),clearInterval(checkExist))},100)),setTimeout(function(){!function(){var e=document.createElement("script"),t=window.location.protocol.split(":")[0];e.src="https"===t?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",e.defer=!0;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}()},5e3),setInterval(function(){document.onselectstart=function(e){return!1},document.onselectstart=function(e){return!1},document.layers&&document.captureEvents(Event.MOUSEDOWN),document.onmousedown=click,document.oncontextmenu=new Function("return false;"),document.onkeydown=document.onkeyup=document.onkeypress=function(){if(123==window.event.keyCode||73==window.event.keyCode||121==window.event.keyCode)return window.event.returnValue=!1}},100);